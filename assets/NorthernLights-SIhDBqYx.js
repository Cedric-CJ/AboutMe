import{_ as H,r as N,f as W,g as z,c as J,o as U}from"./index-DoodzJZr.js";const q=2,V={__name:"NorthernLights",setup(Y){const s=N(null);let a=null,x,u=0,p={h:200,s:100,l:60},C="rgba(0,50,100,0.8)";const f=[],y=[],w=[];let M=0;function A(e){let t=e.replace("#","");t.length===3&&(t=t.split("").map(m=>m+m).join(""));const o=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255,h=parseInt(t.slice(4,6),16)/255,l=Math.max(o,n,h),i=Math.min(o,n,h);let r=0,c=0;const d=l-i,g=(l+i)/2;if(d!==0){switch(c=g>.5?d/(2-l-i):d/(l+i),l){case o:r=(n-h)/d+(n<h?6:0);break;case n:r=(h-o)/d+2;break;default:r=(o-n)/d+4}r*=60}return{h:Math.round(r),s:Math.round(c*100),l:Math.round(g*100)}}function S(){const e=getComputedStyle(document.documentElement).getPropertyValue("--accent-raw").trim();e&&e.startsWith("#")&&(p=A(e))}function v(){s.value&&(s.value.width=window.innerWidth,s.value.height=window.innerHeight,a=s.value.getContext("2d"),M=s.value.height*.4)}function b(){return M+5*Math.sin(u*.5)}function $(){const e=Math.random()<.5?"left":"right",t=200+Math.random()*400,o=200+Math.random()*400,n=e==="left"?-t:s.value.width+t,h=e==="left"?.3+Math.random()*.9:-(.3+Math.random()*.9),l=e==="left"?s.value.width+o:-o;let i,r=0;do i=s.value.height*(.05+Math.random()*.25),r++;while(f.some(d=>d.dir===e&&Math.abs(d.y-i)<120)&&r<10);const c=(Math.random()-.5)*50;return{x:n,y:i,dir:e,speedX:h,spawnX:n,exitX:l,baseLength:500+Math.random()*300,baseAmplitude:5+Math.random()*5,baseBandThickness:60+Math.random()*30,cycles:1+Math.random()*2,phase:Math.random()*2*Math.PI,hueOffset:c,hue:p.h+c,saturation:p.s,lightness:p.l,swayAmplitude:5+Math.random()*5,swayPhase:Math.random()*2*Math.PI,depthShift:20}}function I(){for(;f.length<q;)f.push($());for(let e=0;e<f.length;e++){const t=f[e];t.hue=p.h+t.hueOffset,t.x+=t.speedX;const o=t.dir==="left"?(t.x-t.spawnX)/(t.exitX-t.spawnX):(t.spawnX-t.x)/(t.spawnX-t.exitX);if(o<=0||o>=1){f[e]=$();continue}const n=4*o*(1-o),h=t.baseLength*n,l=t.baseAmplitude*n,i=t.baseBandThickness*n,r=[],c=40,d=t.swayAmplitude*Math.sin(u+t.swayPhase);for(let g=0;g<=c;g++){const m=g/c,G=t.x+m*h,F=l*Math.sin(2*Math.PI*(t.cycles*m+t.phase+u));r.push({x:G+d,y:t.y+F,t:m})}L(r,t,i,n),_(r,t,i,n)}}function L(e,t,o,n){a.save(),a.filter="blur(3px)",a.lineJoin="round",a.lineCap="round",a.beginPath(),a.moveTo(e[0].x,e[0].y);for(let l=1;l<e.length;l++)a.lineTo(e[l].x,e[l].y);for(let l=e.length-1;l>=0;l--){const i=t.depthShift*(1-e[l].t);a.lineTo(e[l].x-i,e[l].y-o)}a.closePath();const h=a.createLinearGradient(0,t.y,0,t.y-o);h.addColorStop(0,`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, ${.8*n})`),h.addColorStop(.5,`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, ${.4*n})`),h.addColorStop(1,`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, 0)`),a.fillStyle=h,a.shadowColor=`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, ${.6*n})`,a.shadowBlur=40,a.fill(),a.restore()}function _(e,t,o,n){const h=b();a.save(),a.beginPath(),a.rect(0,h,s.value.width,s.value.height-h),a.clip(),a.translate(0,2*h),a.scale(1,-.67),a.globalAlpha=.5;const l=r=>5*Math.sin(r/100+u);a.filter="blur(3px)",a.lineJoin="round",a.lineCap="round",a.beginPath(),a.moveTo(e[0].x,e[0].y+l(e[0].x));for(let r=1;r<e.length;r++)a.lineTo(e[r].x,e[r].y+l(e[r].x));for(let r=e.length-1;r>=0;r--){const c=t.depthShift*(1-e[r].t);a.lineTo(e[r].x-c,e[r].y-o+l(e[r].x-c))}a.closePath();const i=a.createLinearGradient(0,t.y,0,t.y-o);i.addColorStop(0,`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, ${.8*n})`),i.addColorStop(.5,`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, ${.4*n})`),i.addColorStop(1,`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, 0)`),a.fillStyle=i,a.shadowColor=`hsla(${t.hue}, ${t.saturation}%, ${t.lightness}%, ${.6*n})`,a.shadowBlur=40,a.fill(),a.restore()}function R(){for(let t=0;t<100;t++){const o={x:Math.random()*s.value.width,y:Math.random()*M,baseRadius:Math.random()*1.5,radius:0,baseAlpha:.5+Math.random()*.5,twinkleSpeed:.001+Math.random()*.002,phase:Math.random()*2*Math.PI};o.radius=o.baseRadius,y.push(o)}}function X(){y.forEach(e=>{const t=e.baseAlpha+Math.sin(performance.now()*e.twinkleSpeed+e.phase),o=Math.max(.3,Math.min(t,e.baseAlpha+1));a.beginPath(),a.arc(e.x,e.y,e.radius,0,2*Math.PI),a.fillStyle=`rgba(255,255,255,${o})`,a.fill()})}function k(){const e=b();a.save(),a.beginPath(),a.rect(0,e,s.value.width,s.value.height-e),a.clip(),a.translate(0,2*e),a.scale(1,-.67),a.globalAlpha=.6;const t=o=>5*Math.sin(o/100+u);y.forEach(o=>{a.beginPath(),a.arc(o.x,o.y+t(o.x),o.radius,0,2*Math.PI),a.fillStyle="rgba(255,255,255,0.7)",a.fill()}),a.restore()}function T(){w.push({x:Math.random()*s.value.width,y:Math.random()*(M*.8),length:80+Math.random()*50,speed:5+Math.random()*3,angle:Math.PI/4,alpha:1})}function B(){for(let e=w.length-1;e>=0;e--){const t=w[e];t.x+=Math.cos(t.angle)*t.speed,t.y+=Math.sin(t.angle)*t.speed,t.alpha-=.01,t.alpha<=0||t.y>M?w.splice(e,1):(a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(t.x-Math.cos(t.angle)*t.length,t.y-Math.sin(t.angle)*t.length),a.strokeStyle=`rgba(255,255,255,${t.alpha})`,a.lineWidth=2,a.stroke())}Math.random()<.002&&T()}function O(){const e=s.value.width*.8,t=s.value.height*.2,o=60;a.save(),a.shadowBlur=30,a.shadowColor="rgba(255,255,255,0.6)",a.beginPath(),a.arc(e,t,o,0,2*Math.PI);const n=a.createRadialGradient(e,t,o*.2,e,t,o);n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(.7,"rgba(220,220,220,0.9)"),n.addColorStop(1,"rgba(180,180,180,0.8)"),a.fillStyle=n,a.fill(),a.shadowBlur=0,a.globalCompositeOperation="multiply",a.beginPath(),a.arc(e-10,t-10,o*.95,0,2*Math.PI),a.fillStyle="rgba(0,0,0,0.15)",a.fill(),a.globalCompositeOperation="source-over",a.restore()}function E(){const e=b(),t=s.value.width*.8,o=s.value.height*.2,n=60;a.save(),a.beginPath(),a.rect(0,e,s.value.width,s.value.height-e),a.clip(),a.translate(0,2*e),a.scale(1,-.67),a.globalAlpha=.4,a.beginPath(),a.arc(t,o,n,0,2*Math.PI);const h=a.createRadialGradient(t,o,n*.2,t,o,n);h.addColorStop(0,"rgba(255,255,255,0.5)"),h.addColorStop(.7,"rgba(220,220,220,0.4)"),h.addColorStop(1,"rgba(180,180,180,0.3)"),a.fillStyle=h,a.fill(),a.restore()}function j(){const e=b();a.save(),a.filter="blur(3px)",a.globalAlpha=.3,a.fillStyle=C,a.fillRect(0,e,s.value.width,s.value.height-e),a.restore()}function P(){u+=.005,S(),a.clearRect(0,0,s.value.width,s.value.height),O(),X(),k(),I(),B(),E(),j(),x=requestAnimationFrame(P)}return W(()=>{v(),S(),R(),window.addEventListener("resize",v),P()}),z(()=>{window.removeEventListener("resize",v),cancelAnimationFrame(x)}),(e,t)=>(U(),J("canvas",{ref_key:"canvas",ref:s,class:"canvas"},null,512))}},K=H(V,[["__scopeId","data-v-780b5c62"]]);export{K as default};
